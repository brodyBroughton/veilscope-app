/* ==========================================================================
   Veilscope App Preview — VS Code-style shell
   ========================================================================== */

:root { color-scheme: light dark; }

:root{
  --topbar-h: 56px;
  --status-h: 28px;
  --rail-w: 280px;

  --accent: var(--color-accent-2, #EC4899);

  /* Light defaults */
  --bg: #F6F7FB;
  --panel: #FFFFFF;
  --panel-2:#F3F4FA;
  --panel-subtle:#F9FAFB;
  --panel-elevated:#FFFFFF;
  --border-subtle:#E5E7EB;
  --border-strong:#111827;
  --text-muted:#6B7280;
  --text:#111827;
  --pill:#111827;
  --pill-text:#F9FAFB;
  --scrim:#000000;
  --topbar-bg: #020617;
  --sep:#111827;
  --ring:#0EA5E9;
  --danger:#EF4444;
}

/* Dark theme overrides */
@media (prefers-color-scheme: dark) {
  :root{
    --bg: #020617;
    --panel: #020617;
    --panel-2:#020617;
    --panel-subtle:#020617;
    --panel-elevated:#020617;
    --border-subtle:#1F2937;
    --border-strong:#9CA3AF;
    --text-muted:#6B7280;
    --text:#F9FAFB;
    --pill:#F9FAFB;
    --pill-text:#111827;
    --scrim:rgba(0,0,0,.6);
    --topbar-bg: #020617;
    --sep:#020617;
    --ring:#38BDF8;
  }
}

/* Demo dark theme override — make sure we don’t conflict */
.app-theme--dark,
:root[data-theme="dark"],
body[class*="dark"]{
  --bg: #020617;
  --panel: #020617;
  --panel-2:#020617;
  --panel-subtle:#020617;
  --panel-elevated:#020617;
  --border-subtle:#1F2937;
  --border-strong:#9CA3AF;
  --text-muted:#6B7280;
  --text:#F9FAFB;
  --pill:#F9FAFB;
  --pill-text:#111827;
  --scrim:rgba(0,0,0,.6);
  --topbar-bg: #020617;
  --sep:#020617;
  --ring:#38BDF8;
}

/* VS Code style monospace */
html{
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "SF Pro Icons", "Helvetica Neue", Arial, sans-serif;
  background-color: #020617;
}

/* Minimal reset */
*, *::before, *::after{
  box-sizing:border-box;
}
body{
  margin:0;
  padding:0;
}

/* ==========================================================================
   Webapp Shell Layout
   ========================================================================== */

.webapp-root{
  min-height:100vh;
  background: radial-gradient(circle at top left, #0f172a, #020617 50%, #000000);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:12px;
}

.webapp-shell{
  width:100%;
  max-width:1280px;
  min-height:min(720px, 100vh - 24px);
  border-radius:24px;
  overflow:hidden;
  border:1px solid rgba(148, 163, 184, 0.4);
  box-shadow:
    0 24px 60px rgba(15, 23, 42, 0.95),
    0 0 0 1px rgba(15, 23, 42, 0.75);
}

/* Main app grid (topbar + body) */
.webapp{
  background: radial-gradient(circle at 0 0, #020617 0, #020617 50%, #020617 100%);
  color:var(--text);
  display:flex;
  flex-direction:column;
  min-height:100%;
}

/* ==========================================================================
   Top Bar
   ========================================================================== */

.app-topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 12px 0 14px;
  height:var(--topbar-h);
  background:
    radial-gradient(circle at 0 0, rgba(56, 189, 248, .25), transparent 52%),
    radial-gradient(circle at 100% 0, rgba(236, 72, 153, .25), transparent 55%),
    linear-gradient(90deg, #020617, #020617);
  color:#e5e7eb;
  border-bottom:1px solid rgba(15, 23, 42, 0.95);
  position:relative;
  z-index:30;
}

.app-topbar-left{
  display:flex;
  align-items:center;
  gap:10px;
}

.menu-btn{
  width:32px;
  height:32px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.65);
  background:linear-gradient(145deg, rgba(15,23,42,1), rgba(15,23,42,.92));
  display:inline-grid;
  place-items:center;
  cursor:pointer;
  padding:0;
}
.menu-btn:hover{
  border-color:rgba(248,250,252,.9);
}
.menu-btn svg{
  width:18px;
  height:18px;
  stroke:#e5e7eb;
}

.app-logo{
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.app-logo-mark{
  width:24px;
  height:24px;
  border-radius:999px;
  background:radial-gradient(circle at 30% 0, #F97316, #DB2777 50%, #4F46E5);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  color:#f9fafb;
  font-size:14px;
  font-weight:700;
  box-shadow:0 0 0 1px rgba(15,23,42,.8), 0 0 22px rgba(236,72,153,.6);
}
.app-logo-text{
  display:flex;
  flex-direction:column;
}
.app-logo-title{
  font-size:16px;
  line-height:1.1;
  font-weight:700;
  letter-spacing:.03em;
}
.app-logo-sub{
  font-size:11px;
  opacity:.7;
}

/* Right side of topbar */
.app-topbar-right{
  display:flex;
  align-items:center;
  gap:8px;
}

.metric-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  border-radius:999px;
  font-size:11px;
  border:1px solid rgba(148,163,184,.6);
  background:radial-gradient(circle at 0 0, rgba(148,163,184,.35), transparent 55%), rgba(15,23,42,1);
}
.metric-dot{
  width:7px;
  height:7px;
  border-radius:999px;
  background:#22C55E;
  box-shadow:0 0 8px rgba(34,197,94,.9);
}

.topbar-divider{
  width:1px;
  height:20px;
  background:linear-gradient(to bottom, transparent, rgba(148,163,184,.7), transparent);
}

/* Avatar + controls on topbar */
.topbar-controls{
  display:flex;
  align-items:center;
  gap:8px;
}

.badge-pill{
  font-size:11px;
  padding:4px 9px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.65);
  background: radial-gradient(circle at 100% 0, rgba(251,191,36,.45), transparent 55%), rgba(15,23,42,1);
}

.icon-btn{
  width:32px;
  height:32px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.65);
  background:radial-gradient(circle at 0 0, rgba(148,163,184,.35), transparent 55%), rgba(15,23,42,1);
  display:inline-grid;
  place-items:center;
  cursor:pointer;
  padding:0;
}
.icon-btn svg{
  width:17px;
  height:17px;
  stroke:#e5e7eb;
}

.avatar-pill{
  width:34px;
  height:34px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.65);
  background:radial-gradient(circle at 0 0, rgba(236,72,153,.45), transparent 55%), rgba(15,23,42,1);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  font-weight:600;
}

/* ==========================================================================
   Drawer (left rail)
   ========================================================================== */

.app-body{
  display:flex;
  flex:1 1 auto;
  min-height:0;
}

.app-drawer{
  background:radial-gradient(circle at 0 0, rgba(15,23,42,1) 0, #020617 55%, #020617 100%);
  border-right:1px solid rgba(15, 23, 42, 0.95);
  width:var(--rail-w);
  display:flex;
  flex-direction:column;
  padding:12px 12px 12px 12px;
  gap:10px;
  position:fixed;
  inset:var(--topbar-h) auto 0 0;
  transform:translateX(-100%);
  transition:transform .18s ease-out;
  z-index:40;
}

/* Drawer open for mobile */
.app-drawer.is-open{
  transform:translateX(0);
}

.drawer-head{
  display:flex;
  flex-direction:column;
  gap:8px;
}

.search{
  display:flex;
}
.search input{
  width:100%;
  border-radius:999px;
  border:1px solid rgba(31,41,55,.9);
  background:radial-gradient(circle at 0 0, rgba(15,23,42,1) 0, #020617 60%), #020617;
  color:#e5e7eb;
  padding:9px 11px;
  font-size:13px;
}
.search input::placeholder{
  color:rgba(148,163,184,.9);
}
.search input:focus-visible{
  outline:2px solid rgba(56,189,248,.8);
  outline-offset:1px;
}

.drawer-actions{
  display:flex;
  gap:8px;
}

.mini-btn{
  flex:1;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.65);
  background:radial-gradient(circle at 50% 0, rgba(236,72,153,.45), transparent 55%), rgba(15,23,42,1);
  color:#f9fafb;
  font-size:13px;
  padding:7px 10px;
  cursor:pointer;
}

/* Scrim for mobile drawer */
.scrim{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:35;
}

/* ==========================================================================
   Workbench / Main pane
   ========================================================================== */

.workbench{
  background: radial-gradient(circle at 0 0, #020617 0, #020617 50%, #020617 100%);
  color:var(--text);
  padding:12px;
  border-top:1px solid rgba(15, 23, 42, 0.95);
  min-height:calc(100vh - var(--topbar-h));
  display:flex;
  flex-direction:column;
  gap:18px;
}

/* Sections inside workbench */
.pane-main,
.pane-side{
  background: radial-gradient(circle at 0 0, rgba(15,23,42,1) 0, #020617 55%, #020617 100%);
  border-radius:18px;
  border:1px solid rgba(30,64,175,.7);
  box-shadow:0 18px 45px rgba(15,23,42,.88);
  padding:18px 18px 18px 18px;
}

/* Company heading */
.company{
  margin:0 0 6px 0;
  font-size:20px;
}
.desc{
  margin:0 0 12px 0;
  font-size:13px;
  color:var(--text-muted);
}

/* Score display */
.score{
  font-size:13px;
  margin-bottom:10px;
}
.score strong{
  font-weight:600;
}

/* Factors list */
.factors{
  border-radius:14px;
  border:1px solid rgba(30,64,175,.7);
  background:radial-gradient(circle at 0 0, rgba(15,23,42,1) 0, #020617 65%, #020617 100%);
  padding:10px 12px;
}

.factor-list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:12px;
}
.factor-list li{
  display:flex;
  align-items:flex-start;
  gap:6px;
}

.dot{
  width:8px;
  height:8px;
  border-radius:999px;
  margin-top:.35em;
}
.dot.low{ background:#22C55E; box-shadow:0 0 8px rgba(34,197,94,.75); }
.dot.med{ background:#F97316; box-shadow:0 0 8px rgba(249,115,22,.75); }
.dot.high{ background:#EF4444; box-shadow:0 0 8px rgba(239,68,68,.75); }

.factor-list strong{
  margin-right:2px;
}
.factor-list span{
  color:var(--text-muted);
}

/* Empty-state scorecard */
.empty-scorecard{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:flex-start;
}
.empty-scorecard-title{
  margin:0;
  font-size:16px;
}
.empty-scorecard-body{
  margin:0;
  font-size:13px;
  color:var(--text-muted);
}
.primary-cta{
  margin-top:2px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.65);
  background:radial-gradient(circle at 50% 0, rgba(34,197,94,.55), transparent 55%), rgba(15,23,42,1);
  padding:7px 14px;
  color:#f9fafb;
  font-size:13px;
  cursor:pointer;
}
.empty-scorecard-quota{
  margin:2px 0 0 0;
  font-size:11px;
  color:var(--text-muted);
}

/* Charts pane */
.pane-side{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.charts-title{
  margin:0 0 8px 0;
  font-size:14px;
}

.skeleton.chart{
  height:160px;
  border-radius:14px;
  background:linear-gradient(90deg, #020617, #020617);
  position:relative;
  overflow:hidden;
}
.skeleton.chart::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg, transparent 0, rgba(148,163,184,.15) 30%, transparent 60%);
  transform:translateX(-100%);
  animation:shimmer 1.6s infinite;
}

@keyframes shimmer{
  to{ transform:translateX(100%); }
}

/* ==========================================================================
   Responsive layout
   ========================================================================== */

/* Desktop & large tablets */
@media (min-width: 992px){
  .menu-btn{
    display: inline-grid;
  }

  .app-drawer{
    position: sticky;
    top: var(--topbar-h);
    height: calc(100vh - var(--topbar-h));
    transform: none;
    width: var(--rail-w);
  }

  .scrim{ display:none !important; }

  .webapp{
    display:grid;
    grid-template-rows: var(--topbar-h) 1fr;
    grid-template-columns: var(--rail-w) minmax(0, 1fr);
  }

  /* Collapse drawer on toggle */
  .webapp.drawer-closed{
    grid-template-columns: 0 minmax(0, 1fr);
  }

  .webapp.drawer-closed .app-drawer{
    width: 0;
    padding: 0;
    border-width: 0;
    overflow: hidden;
    pointer-events: none;
  }

  .app-topbar{ grid-column: 1 / span 2; }
  .app-drawer{ grid-row: 2; grid-column: 1; }

  /* Fix workbench layout */
  .workbench{
    grid-row: 2;
    grid-column: 2;
    max-width: unset;
    margin: 12px 12px 0 12px;
    padding: 20px;

    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 20px;
  }

  .pane-main{
    flex: 1 1 auto;
    min-width: 0;
  }

  .pane-side{
    flex: 0 0 360px;
    max-width: 360px;
  }
}

/* Mobile & small tablets */
@media (max-width: 991px){
  .workbench{
    display: flex;
    flex-direction: column;
    gap: 18px;
  }

  .pane-main, .pane-side{
    width: 100%;
  }

  .factor-list li{
    display: grid;
    grid-template-columns: auto 1fr;
    grid-template-areas:
      "dot label"
      ".   desc";
    column-gap: 8px;
    row-gap: 2px;
    align-items: start;
  }
  .factor-list li > .dot{ grid-area: dot; margin-top: .3em; }
  .factor-list li > strong{ grid-area: label; margin-right: 0; }
  .factor-list li > span:not(.dot){
    grid-area: desc;
    display: block;
    margin-top: 2px;
    overflow-wrap: anywhere;
  }
}